<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Virtual Keyboard Settings</title>
    <link href="options/styles.css" rel="stylesheet" />
  </head>
  <body>
    <h1>Virtual Keyboard Settings</h1>
    <div id="page">
      <div id="navigation">
        <button id="closeSettings" type="button" style="padding: 8px 16px; cursor: pointer;">Close Settings</button>
        <div id="changeEffect">Settings are automatically saved.</div>
      </div>
      <div id="options">
        <h2>Display Options</h2>
        <p>
          <label>
            <input type="checkbox" id="showOpenButton" checked />
            Show keyboard button in lower right corner
          </label>
        </p>
        <p style="display: flex; align-items: center; gap: 5px">
          <span>Width (%):</span>
          <input
            type="number"
            id="keyboardZoomWidth"
            value="100"
            min="25"
            max="150"
            style="width: 60px"
          />
          <span style="margin-left: 15px">Height (%):</span>
          <input
            type="number"
            id="keyboardZoomHeight"
            value="100"
            min="25"
            max="150"
            style="width: 60px"
          />
        </p>
        <p>
          <label>
            <input type="checkbox" id="zoomLock" checked />
            Link width and height
          </label>
        </p>
        <p>
          <label>
            <input type="checkbox" id="keyboardDraggable" />
            Allow keyboard repositioning (drag handle appears at top)
          </label>
          <button id="resetPosition" type="button" style="margin-left: 20px">
            Reset Position
          </button>
        </p>
        <p>
          <label>
            <input type="checkbox" id="showNumberBar" checked />
            Show number row above keyboard
          </label>
        </p>
        <p>
          <label>
            <input type="checkbox" id="showLanguageButton" />
            Show language switcher button
          </label>
        </p>
        <p id="showSettingsButtonContainer">
          <label>
            <input type="checkbox" id="showSettingsButton" checked />
            Show settings button on keyboard
          </label>
          <br />
          <small
            id="showSettingsButtonHelp"
            style="color: #888; margin-left: 22px"
          >
            If disabled, access settings via the extension icon in your browser
            toolbar
          </small>
        </p>
        <p>
          <label>
            <input type="checkbox" id="showUrlButton" checked />
            Show URL button on keyboard
          </label>
        </p>
        <p>
          <label>
            <input type="checkbox" id="showCloseButton" checked />
            Show close button on keyboard
          </label>
        </p>
        <p>
          <label>
            <input type="checkbox" id="showNumbersButton" checked />
            Show numbers/symbols toggle (&amp;123) button
          </label>
        </p>
        <p>
          <label>
            <input type="checkbox" id="autostart" />
            Always show keyboard (autostart)
          </label>
          <br />
          <small style="color: #888; margin-left: 22px">
            Keyboard opens automatically when the page loads.
          </small>
        </p>

        <h2>Input Options</h2>
        <p>
          <label>
            <input type="checkbox" id="spacebarCursorSwipe" />
            Swipe on spacebar to move cursor
          </label>
        </p>
        <p>
          <label>
            <input type="checkbox" id="stickyShift" />
            Sticky shift (stays on until pressed again)
          </label>
        </p>
        <p>
          <label>
            <input type="checkbox" id="autoCaps" />
            Auto-capitalize first letter (after Enter, sentence punctuation, or on keyboard open)
          </label>
        </p>
        <p>
          <label>
            <input type="checkbox" id="keyRepeatEnabled" />
            Hold to repeat (backspace key)
          </label>
        </p>
        <div id="keyRepeatOptions" style="margin-left: 22px; display: none">
          <p style="display: flex; align-items: center; gap: 10px">
            <span>Initial delay:</span>
            <input
              type="number"
              id="keyRepeatDelay"
              value="400"
              min="100"
              max="1000"
              step="50"
              style="width: 70px"
            />
            <span>ms</span>
          </p>
          <p style="display: flex; align-items: center; gap: 10px">
            <span>Repeat speed:</span>
            <input
              type="number"
              id="keyRepeatSpeed"
              value="75"
              min="30"
              max="200"
              step="10"
              style="width: 70px"
            />
            <span>ms</span>
          </p>
        </div>

        <h2>Kiosk Mode</h2>
        <p>
          <label>
            <input type="checkbox" id="hideCursor" />
            Hide cursor (for touchscreen kiosks)
          </label>
          <br />
          <small style="color: #888; margin-left: 22px">
            Hides the mouse cursor on all pages. Useful for touch-only displays.
          </small>
        </p>

        <h2>Voice Input (Speech-to-Text)</h2>
        <p>
          <label>
            <input type="checkbox" id="voiceEnabled" />
            Enable voice input button
          </label>
          <br />
          <small style="color: #888; margin-left: 22px">
            Runs 100% locally in your browser. No data sent to servers.
          </small>
        </p>
        <div id="voiceOptions" style="margin-left: 22px; display: none">
          <p id="voiceEngineRow" style="display: none; align-items: center; gap: 10px">
            <span>Engine:</span>
            <select id="voiceEngine" style="padding: 5px">
              <option value="whisper">Whisper (Batch - Higher Quality)</option>
              <option value="vosk">Vosk (Streaming - Lower Latency)</option>
            </select>
          </p>
          <p style="display: flex; align-items: center; gap: 10px">
            <span>Model:</span>
            <select id="voiceModel" style="padding: 5px">
              <!-- Options populated by JavaScript based on engine -->
            </select>
            <button id="downloadModel" type="button" style="padding: 5px 12px">Download</button>
          </p>
          <div id="voiceModelStatus" style="margin-top: 10px; display: none">
            <div style="display: flex; align-items: center; gap: 10px">
              <span id="voiceModelStatusText">Downloading model...</span>
              <span id="voiceModelProgress"></span>
            </div>
            <div
              style="
                width: 100%;
                height: 6px;
                background: #ddd;
                border-radius: 3px;
                margin-top: 5px;
              "
            >
              <div
                id="voiceModelProgressBar"
                style="
                  width: 0%;
                  height: 100%;
                  background: #2980b9;
                  border-radius: 3px;
                  transition: width 0.2s;
                "
              ></div>
            </div>
          </div>
          <p id="vadModeContainer">
            <label>
              <input type="checkbox" id="voiceVadMode" />
              Auto-listen mode (Whisper only)
            </label>
            <br />
            <small style="color: #888; margin-left: 22px">
              Automatically detects when you stop speaking and transcribes.
              Without this, press mic to start/stop recording manually.
            </small>
          </p>
          <p>
            <small style="color: #888">
              Press the mic button to start recording, press again to stop.
              The model is downloaded when you enable this setting and cached offline.
              Quantized models are smaller and faster; full precision is higher quality.
            </small>
          </p>
        </div>

        <h2>Keyboard Layouts</h2>
        <p>
          Select which keyboard layouts to enable. The first layout in your
          chosen list will be the default.
        </p>
        <table cellpadding="0" cellspacing="0">
          <tr>
            <th>Available Layouts:</th>
            <th></th>
            <th>Chosen Layouts:</th>
          </tr>
          <tr>
            <td>
              <select id="al" multiple class="layout">
                <option value="en">English (QWERTY)</option>
                <option value="fr">French (AZERTY)</option>
                <option value="de">German (QWERTZ)</option>
                <option value="it">Italian (QWERTY)</option>
                <option value="kr">Korean</option>
                <option value="hu">Magyar (QWERTY)</option>
                <option value="no">Norwegian (QWERTY)</option>
                <option value="pl">Polish (QWERTY)</option>
                <option value="ru">Russian (JCUKEN)</option>
                <option value="sl">Slovenian (QWERTZ)</option>
                <option value="es">Spanish (QWERTY)</option>
                <option value="sw">Swedish (QWERTY)</option>
                <option value="ta">Tamil 99</option>
                <option value="cs">Czech (QWERTY)</option>
                <option value="ua">Ukrainian (QWERTY)</option>
              </select>
            </td>
            <td>
              <button id="kl_add">&gt;</button>
              <br />
              <button id="kl_remove">&lt;</button>
            </td>
            <td>
              <select id="sl" multiple class="layout">
                <option value="en">English (QWERTY)</option>
              </select>
            </td>
          </tr>
        </table>
      </div>
      <div id="links">
        <h2 style="margin-top: 40px">Credits</h2>
        <a
          target="_blank"
          href="https://github.com/Gobd/chrome-virtual-keyboard"
        >
          View on GitHub
        </a>
        <p id="footer">
          Developed by: <span>Shaun Tabone & Brian Kemper</span>
        </p>
      </div>
    </div>
    <script type="module" src="options/script.js"></script>
  </body>
</html>
